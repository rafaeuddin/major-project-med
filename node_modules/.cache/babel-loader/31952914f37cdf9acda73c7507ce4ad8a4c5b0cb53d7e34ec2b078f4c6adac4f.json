{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mrafa\\\\OneDrive\\\\Desktop\\\\code\\\\major project\\\\src\\\\components\\\\DoctorChatbot.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport '../styles/DoctorChatbot.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst DoctorChatbot = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    authFetch,\n    currentUser\n  } = useAuth();\n  const [messages, setMessages] = useState([{\n    id: 1,\n    text: \"Hello! I'm Dr. AI, your virtual healthcare assistant. How can I help you today?\",\n    sender: 'bot',\n    timestamp: new Date()\n  }]);\n  const [input, setInput] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const [isChatOpen, setIsChatOpen] = useState(false);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [showBookingButton, setShowBookingButton] = useState(false);\n  const [recommendedSpecialty, setRecommendedSpecialty] = useState('');\n  const messagesEndRef = useRef(null);\n  const [conversationHistory, setConversationHistory] = useState([]);\n\n  // Medical knowledge base - simplified for demo\n  const medicalKnowledge = [{\n    keywords: ['headache', 'head pain', 'migraine'],\n    response: \"It sounds like you're experiencing a headache. This could be due to stress, dehydration, lack of sleep, or other factors. If it's severe, persistent, or accompanied by other symptoms like fever, vision changes, or neck stiffness, you should consult with a doctor. Would you like to book an appointment?\"\n  }, {\n    keywords: ['fever', 'temperature', 'hot', 'chills'],\n    response: \"A fever is often a sign that your body is fighting an infection. Make sure to stay hydrated and rest. If your temperature is above 103°F (39.4°C), lasts more than three days, or is accompanied by severe symptoms, you should seek medical attention. Would you like to discuss this with a doctor?\"\n  }, {\n    keywords: ['cough', 'coughing', 'chest congestion'],\n    response: \"Coughing can be caused by various factors including allergies, cold, flu, or respiratory infections. If your cough is persistent (lasting more than 2 weeks), produces discolored mucus, or is accompanied by shortness of breath, you should consult with a healthcare professional. Shall I help you book an appointment?\"\n  }, {\n    keywords: ['cold', 'flu', 'stuffy nose', 'runny nose', 'sore throat'],\n    response: \"Common cold symptoms typically resolve within 7-10 days. Stay hydrated, get plenty of rest, and consider over-the-counter medications for symptom relief. If symptoms worsen or don't improve, it might be good to see a doctor. Would you like to schedule a consultation?\"\n  }, {\n    keywords: ['stomach', 'abdomen', 'pain', 'nausea', 'vomiting', 'diarrhea'],\n    response: \"Stomach issues can result from various causes including food poisoning, viruses, or digestive disorders. Ensure you stay hydrated. If symptoms are severe, persistent, or accompanied by fever, blood in stool, or intense pain, medical attention is recommended. Would you like to speak with a specialist?\"\n  }, {\n    keywords: ['rash', 'skin', 'itchy', 'bumps', 'hives'],\n    response: \"Skin rashes can be caused by allergies, infections, or other conditions. Avoid scratching and irritating the area. If the rash is widespread, painful, or accompanied by other symptoms like fever or difficulty breathing, you should consult a doctor. Would you like to see a dermatologist?\"\n  }, {\n    keywords: ['appointment', 'book', 'schedule', 'doctor', 'visit'],\n    response: \"I'd be happy to help you book an appointment. You can click on 'Book New Appointment' in your dashboard, or I can guide you to the right specialist based on your symptoms. What type of doctor would you like to see?\"\n  }, {\n    keywords: ['thank', 'thanks', 'appreciate', 'helpful'],\n    response: \"You're welcome! I'm here to help. Is there anything else you'd like to know about your health today?\"\n  }];\n\n  // Specialty recommendations based on symptoms\n  const specialtyRecommendations = {\n    headache: ['Neurology', 'General Physician'],\n    migraine: ['Neurology'],\n    fever: ['General Physician', 'Infectious Disease'],\n    cough: ['Pulmonology', 'General Physician'],\n    'chest pain': ['Cardiology', 'Emergency Medicine'],\n    'shortness of breath': ['Pulmonology', 'Cardiology'],\n    rash: ['Dermatology', 'Allergy and Immunology'],\n    'stomach pain': ['Gastroenterology', 'General Physician'],\n    nausea: ['Gastroenterology', 'General Physician'],\n    vomiting: ['Gastroenterology', 'Emergency Medicine'],\n    diarrhea: ['Gastroenterology'],\n    'joint pain': ['Rheumatology', 'Orthopedics'],\n    'back pain': ['Orthopedics', 'Neurology', 'Physical Therapy'],\n    'eye pain': ['Ophthalmology'],\n    'vision problems': ['Ophthalmology', 'Neurology'],\n    'ear pain': ['Otolaryngology (ENT)'],\n    'hearing loss': ['Otolaryngology (ENT)', 'Audiology'],\n    'sore throat': ['Otolaryngology (ENT)', 'General Physician'],\n    'urinary problems': ['Urology', 'Nephrology'],\n    depression: ['Psychiatry', 'Psychology'],\n    anxiety: ['Psychiatry', 'Psychology'],\n    'sleep problems': ['Sleep Medicine', 'Psychiatry'],\n    'high blood pressure': ['Cardiology', 'Internal Medicine'],\n    diabetes: ['Endocrinology', 'Internal Medicine'],\n    'pregnancy': ['Obstetrics and Gynecology']\n  };\n\n  // Severity assessment questions\n  const severityQuestions = {\n    headache: [\"Is this the worst headache of your life?\", \"Are you experiencing any visual disturbances or difficulty speaking?\", \"Is your headache accompanied by a stiff neck or fever?\"],\n    fever: [\"How high is your temperature?\", \"Is your fever accompanied by a rash?\", \"Are you experiencing any difficulty breathing?\"],\n    cough: [\"Are you coughing up blood?\", \"Are you experiencing chest pain when coughing?\", \"Have you been coughing for more than 2 weeks?\"],\n    'chest pain': [\"Is the pain severe or crushing?\", \"Does the pain radiate to your arm, jaw, or back?\", \"Are you experiencing shortness of breath or sweating with the pain?\"]\n  };\n\n  // Handle sending a new message\n  const handleSendMessage = async e => {\n    e.preventDefault();\n    if (input.trim() === '') return;\n    const newUserMessage = {\n      id: messages.length + 1,\n      text: input.trim(),\n      sender: 'user',\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, newUserMessage]);\n    setInput('');\n    setIsTyping(true);\n\n    // Add message to conversation history for the API\n    const updatedHistory = [...conversationHistory, {\n      role: 'user',\n      content: input.trim()\n    }];\n    setConversationHistory(updatedHistory);\n    try {\n      // Make API call to our backend\n      const response = await authFetch('/api/chatbot/message', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          message: input.trim(),\n          conversationHistory: updatedHistory.slice(-10) // Keep last 10 messages\n        })\n      });\n      if (!response.ok) {\n        throw new Error('Failed to get response from chatbot');\n      }\n      const data = await response.json();\n\n      // Add bot's response to conversation history\n      setConversationHistory(prev => [...prev, {\n        role: 'assistant',\n        content: data.data.response\n      }]);\n      const newBotMessage = {\n        id: messages.length + 2,\n        text: data.data.response,\n        sender: 'bot',\n        timestamp: new Date(),\n        urgencyLevel: data.data.urgencyLevel,\n        specialistRecommendation: data.data.specialistRecommendation\n      };\n      setMessages(prev => [...prev, newBotMessage]);\n\n      // Show booking button if a specialist is recommended\n      if (data.data.specialistRecommendation) {\n        setRecommendedSpecialty(data.data.specialistRecommendation);\n        setShowBookingButton(true);\n      }\n\n      // If urgency level is high, add a follow-up message\n      if (data.data.urgencyLevel === 'urgent') {\n        setTimeout(() => {\n          const emergencyFollowup = {\n            id: messages.length + 3,\n            text: \"If you're experiencing a medical emergency, please call emergency services immediately. Don't wait for an online response.\",\n            sender: 'bot',\n            timestamp: new Date(Date.now() + 1000),\n            urgencyLevel: 'urgent'\n          };\n          setMessages(prev => [...prev, emergencyFollowup]);\n        }, 1000);\n      }\n      if (!isChatOpen) {\n        setUnreadCount(prev => prev + 1);\n      }\n    } catch (error) {\n      console.error('Error communicating with chatbot:', error);\n\n      // Add error message\n      const errorMessage = {\n        id: messages.length + 2,\n        text: \"I'm sorry, I'm having trouble connecting right now. Please try again later or contact support if the problem persists.\",\n        sender: 'bot',\n        timestamp: new Date(),\n        isError: true\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsTyping(false);\n    }\n  };\n\n  // Handle booking appointment\n  const handleBookAppointment = () => {\n    setShowBookingButton(false);\n    const confirmationMessage = {\n      id: messages.length + 1,\n      text: \"Would you like me to help you book an appointment with a specialist?\",\n      sender: 'bot',\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, confirmationMessage]);\n    setTimeout(() => {\n      const botConfirmation = {\n        id: messages.length + 2,\n        text: `Great! I'll help you book an appointment with a ${recommendedSpecialty} specialist. Taking you to our booking page now.`,\n        sender: 'bot',\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, botConfirmation]);\n\n      // After a short delay, navigate to the booking page\n      setTimeout(() => {\n        navigate('/book-appointment', {\n          state: {\n            recommendedSpecialty: recommendedSpecialty\n          }\n        });\n      }, 1500);\n    }, 1000);\n  };\n\n  // Scroll to bottom of messages\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n\n  // Reset unread count when chat is opened\n  useEffect(() => {\n    if (isChatOpen) {\n      setUnreadCount(0);\n    }\n  }, [isChatOpen]);\n\n  // Format timestamp\n  const formatTime = date => {\n    return new Date(date).toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"doctor-chatbot\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"chat-toggle\",\n      onClick: () => setIsChatOpen(!isChatOpen),\n      children: isChatOpen ? /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"close-icon\",\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"chat-icon\",\n          children: \"\\uD83D\\uDC68\\u200D\\u2695\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Dr. AI\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 13\n        }, this), unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"unread-badge\",\n          children: unreadCount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }, this), isChatOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-window\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-title\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"doctor-avatar\",\n            children: \"\\uD83D\\uDC68\\u200D\\u2695\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"doctor-name\",\n            children: \"Dr. AI\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"status-indicator\",\n            children: \"\\u25CF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"chat-subtitle\",\n          children: \"AI-Powered Healthcare Assistant\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messages-container\",\n        children: [messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `message ${message.sender} ${message.urgencyLevel === 'urgent' ? 'urgent' : ''} ${message.isError ? 'error' : ''}`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: message.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"message-time\",\n              children: formatTime(message.timestamp)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 17\n          }, this)\n        }, message.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 15\n        }, this)), isTyping && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message bot\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-content typing\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"typing-indicator\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 15\n        }, this), showBookingButton && !isTyping && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"booking-button-container\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"booking-button\",\n            onClick: handleBookAppointment,\n            children: \"Book Appointment Now\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"chat-input\",\n        onSubmit: handleSendMessage,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: input,\n          onChange: e => setInput(e.target.value),\n          placeholder: \"Type your health question here...\",\n          disabled: isTyping\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: input.trim() === '' || isTyping,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"send-icon\",\n            children: \"\\u27A4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-disclaimer\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"This is an AI assistant and not a replacement for professional medical advice. In case of emergency, call 911 or your local emergency number.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 265,\n    columnNumber: 5\n  }, this);\n};\n_s(DoctorChatbot, \"wY+6dAHuq3Hpfz2xcYqiGuTH904=\", false, function () {\n  return [useNavigate, useAuth];\n});\n_c = DoctorChatbot;\nexport default DoctorChatbot;\nvar _c;\n$RefreshReg$(_c, \"DoctorChatbot\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useNavigate","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","DoctorChatbot","_s","navigate","authFetch","currentUser","messages","setMessages","id","text","sender","timestamp","Date","input","setInput","isTyping","setIsTyping","isChatOpen","setIsChatOpen","unreadCount","setUnreadCount","showBookingButton","setShowBookingButton","recommendedSpecialty","setRecommendedSpecialty","messagesEndRef","conversationHistory","setConversationHistory","medicalKnowledge","keywords","response","specialtyRecommendations","headache","migraine","fever","cough","rash","nausea","vomiting","diarrhea","depression","anxiety","diabetes","severityQuestions","handleSendMessage","e","preventDefault","trim","newUserMessage","length","prev","updatedHistory","role","content","method","headers","body","JSON","stringify","message","slice","ok","Error","data","json","newBotMessage","urgencyLevel","specialistRecommendation","setTimeout","emergencyFollowup","now","error","console","errorMessage","isError","handleBookAppointment","confirmationMessage","botConfirmation","state","_messagesEndRef$curre","current","scrollIntoView","behavior","formatTime","date","toLocaleTimeString","hour","minute","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","map","ref","onSubmit","type","value","onChange","target","placeholder","disabled","_c","$RefreshReg$"],"sources":["C:/Users/mrafa/OneDrive/Desktop/code/major project/src/components/DoctorChatbot.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport '../styles/DoctorChatbot.css';\r\n\r\nconst DoctorChatbot = () => {\r\n  const navigate = useNavigate();\r\n  const { authFetch, currentUser } = useAuth();\r\n  const [messages, setMessages] = useState([\r\n    {\r\n      id: 1,\r\n      text: \"Hello! I'm Dr. AI, your virtual healthcare assistant. How can I help you today?\",\r\n      sender: 'bot',\r\n      timestamp: new Date()\r\n    }\r\n  ]);\r\n  const [input, setInput] = useState('');\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const [isChatOpen, setIsChatOpen] = useState(false);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n  const [showBookingButton, setShowBookingButton] = useState(false);\r\n  const [recommendedSpecialty, setRecommendedSpecialty] = useState('');\r\n  const messagesEndRef = useRef(null);\r\n  const [conversationHistory, setConversationHistory] = useState([]);\r\n\r\n  // Medical knowledge base - simplified for demo\r\n  const medicalKnowledge = [\r\n    {\r\n      keywords: ['headache', 'head pain', 'migraine'],\r\n      response: \"It sounds like you're experiencing a headache. This could be due to stress, dehydration, lack of sleep, or other factors. If it's severe, persistent, or accompanied by other symptoms like fever, vision changes, or neck stiffness, you should consult with a doctor. Would you like to book an appointment?\"\r\n    },\r\n    {\r\n      keywords: ['fever', 'temperature', 'hot', 'chills'],\r\n      response: \"A fever is often a sign that your body is fighting an infection. Make sure to stay hydrated and rest. If your temperature is above 103°F (39.4°C), lasts more than three days, or is accompanied by severe symptoms, you should seek medical attention. Would you like to discuss this with a doctor?\"\r\n    },\r\n    {\r\n      keywords: ['cough', 'coughing', 'chest congestion'],\r\n      response: \"Coughing can be caused by various factors including allergies, cold, flu, or respiratory infections. If your cough is persistent (lasting more than 2 weeks), produces discolored mucus, or is accompanied by shortness of breath, you should consult with a healthcare professional. Shall I help you book an appointment?\"\r\n    },\r\n    {\r\n      keywords: ['cold', 'flu', 'stuffy nose', 'runny nose', 'sore throat'],\r\n      response: \"Common cold symptoms typically resolve within 7-10 days. Stay hydrated, get plenty of rest, and consider over-the-counter medications for symptom relief. If symptoms worsen or don't improve, it might be good to see a doctor. Would you like to schedule a consultation?\"\r\n    },\r\n    {\r\n      keywords: ['stomach', 'abdomen', 'pain', 'nausea', 'vomiting', 'diarrhea'],\r\n      response: \"Stomach issues can result from various causes including food poisoning, viruses, or digestive disorders. Ensure you stay hydrated. If symptoms are severe, persistent, or accompanied by fever, blood in stool, or intense pain, medical attention is recommended. Would you like to speak with a specialist?\"\r\n    },\r\n    {\r\n      keywords: ['rash', 'skin', 'itchy', 'bumps', 'hives'],\r\n      response: \"Skin rashes can be caused by allergies, infections, or other conditions. Avoid scratching and irritating the area. If the rash is widespread, painful, or accompanied by other symptoms like fever or difficulty breathing, you should consult a doctor. Would you like to see a dermatologist?\"\r\n    },\r\n    {\r\n      keywords: ['appointment', 'book', 'schedule', 'doctor', 'visit'],\r\n      response: \"I'd be happy to help you book an appointment. You can click on 'Book New Appointment' in your dashboard, or I can guide you to the right specialist based on your symptoms. What type of doctor would you like to see?\"\r\n    },\r\n    {\r\n      keywords: ['thank', 'thanks', 'appreciate', 'helpful'],\r\n      response: \"You're welcome! I'm here to help. Is there anything else you'd like to know about your health today?\"\r\n    }\r\n  ];\r\n\r\n  // Specialty recommendations based on symptoms\r\n  const specialtyRecommendations = {\r\n    headache: ['Neurology', 'General Physician'],\r\n    migraine: ['Neurology'],\r\n    fever: ['General Physician', 'Infectious Disease'],\r\n    cough: ['Pulmonology', 'General Physician'],\r\n    'chest pain': ['Cardiology', 'Emergency Medicine'],\r\n    'shortness of breath': ['Pulmonology', 'Cardiology'],\r\n    rash: ['Dermatology', 'Allergy and Immunology'],\r\n    'stomach pain': ['Gastroenterology', 'General Physician'],\r\n    nausea: ['Gastroenterology', 'General Physician'],\r\n    vomiting: ['Gastroenterology', 'Emergency Medicine'],\r\n    diarrhea: ['Gastroenterology'],\r\n    'joint pain': ['Rheumatology', 'Orthopedics'],\r\n    'back pain': ['Orthopedics', 'Neurology', 'Physical Therapy'],\r\n    'eye pain': ['Ophthalmology'],\r\n    'vision problems': ['Ophthalmology', 'Neurology'],\r\n    'ear pain': ['Otolaryngology (ENT)'],\r\n    'hearing loss': ['Otolaryngology (ENT)', 'Audiology'],\r\n    'sore throat': ['Otolaryngology (ENT)', 'General Physician'],\r\n    'urinary problems': ['Urology', 'Nephrology'],\r\n    depression: ['Psychiatry', 'Psychology'],\r\n    anxiety: ['Psychiatry', 'Psychology'],\r\n    'sleep problems': ['Sleep Medicine', 'Psychiatry'],\r\n    'high blood pressure': ['Cardiology', 'Internal Medicine'],\r\n    diabetes: ['Endocrinology', 'Internal Medicine'],\r\n    'pregnancy': ['Obstetrics and Gynecology']\r\n  };\r\n  \r\n  // Severity assessment questions\r\n  const severityQuestions = {\r\n    headache: [\r\n      \"Is this the worst headache of your life?\",\r\n      \"Are you experiencing any visual disturbances or difficulty speaking?\",\r\n      \"Is your headache accompanied by a stiff neck or fever?\"\r\n    ],\r\n    fever: [\r\n      \"How high is your temperature?\",\r\n      \"Is your fever accompanied by a rash?\",\r\n      \"Are you experiencing any difficulty breathing?\"\r\n    ],\r\n    cough: [\r\n      \"Are you coughing up blood?\",\r\n      \"Are you experiencing chest pain when coughing?\",\r\n      \"Have you been coughing for more than 2 weeks?\"\r\n    ],\r\n    'chest pain': [\r\n      \"Is the pain severe or crushing?\",\r\n      \"Does the pain radiate to your arm, jaw, or back?\",\r\n      \"Are you experiencing shortness of breath or sweating with the pain?\"\r\n    ]\r\n  };\r\n\r\n  // Handle sending a new message\r\n  const handleSendMessage = async (e) => {\r\n    e.preventDefault();\r\n    if (input.trim() === '') return;\r\n\r\n    const newUserMessage = {\r\n      id: messages.length + 1,\r\n      text: input.trim(),\r\n      sender: 'user',\r\n      timestamp: new Date()\r\n    };\r\n\r\n    setMessages(prev => [...prev, newUserMessage]);\r\n    setInput('');\r\n    setIsTyping(true);\r\n\r\n    // Add message to conversation history for the API\r\n    const updatedHistory = [\r\n      ...conversationHistory,\r\n      { role: 'user', content: input.trim() }\r\n    ];\r\n    setConversationHistory(updatedHistory);\r\n\r\n    try {\r\n      // Make API call to our backend\r\n      const response = await authFetch('/api/chatbot/message', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          message: input.trim(),\r\n          conversationHistory: updatedHistory.slice(-10) // Keep last 10 messages\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to get response from chatbot');\r\n      }\r\n\r\n      const data = await response.json();\r\n      \r\n      // Add bot's response to conversation history\r\n      setConversationHistory(prev => [\r\n        ...prev,\r\n        { role: 'assistant', content: data.data.response }\r\n      ]);\r\n\r\n      const newBotMessage = {\r\n        id: messages.length + 2,\r\n        text: data.data.response,\r\n        sender: 'bot',\r\n        timestamp: new Date(),\r\n        urgencyLevel: data.data.urgencyLevel,\r\n        specialistRecommendation: data.data.specialistRecommendation\r\n      };\r\n      \r\n      setMessages(prev => [...prev, newBotMessage]);\r\n      \r\n      // Show booking button if a specialist is recommended\r\n      if (data.data.specialistRecommendation) {\r\n        setRecommendedSpecialty(data.data.specialistRecommendation);\r\n        setShowBookingButton(true);\r\n      }\r\n      \r\n      // If urgency level is high, add a follow-up message\r\n      if (data.data.urgencyLevel === 'urgent') {\r\n        setTimeout(() => {\r\n          const emergencyFollowup = {\r\n            id: messages.length + 3,\r\n            text: \"If you're experiencing a medical emergency, please call emergency services immediately. Don't wait for an online response.\",\r\n            sender: 'bot',\r\n            timestamp: new Date(Date.now() + 1000),\r\n            urgencyLevel: 'urgent'\r\n          };\r\n          setMessages(prev => [...prev, emergencyFollowup]);\r\n        }, 1000);\r\n      }\r\n      \r\n      if (!isChatOpen) {\r\n        setUnreadCount(prev => prev + 1);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error communicating with chatbot:', error);\r\n      \r\n      // Add error message\r\n      const errorMessage = {\r\n        id: messages.length + 2,\r\n        text: \"I'm sorry, I'm having trouble connecting right now. Please try again later or contact support if the problem persists.\",\r\n        sender: 'bot',\r\n        timestamp: new Date(),\r\n        isError: true\r\n      };\r\n      \r\n      setMessages(prev => [...prev, errorMessage]);\r\n    } finally {\r\n      setIsTyping(false);\r\n    }\r\n  };\r\n\r\n  // Handle booking appointment\r\n  const handleBookAppointment = () => {\r\n    setShowBookingButton(false);\r\n    \r\n    const confirmationMessage = {\r\n      id: messages.length + 1,\r\n      text: \"Would you like me to help you book an appointment with a specialist?\",\r\n      sender: 'bot',\r\n      timestamp: new Date()\r\n    };\r\n    \r\n    setMessages(prev => [...prev, confirmationMessage]);\r\n    \r\n    setTimeout(() => {\r\n      const botConfirmation = {\r\n        id: messages.length + 2,\r\n        text: `Great! I'll help you book an appointment with a ${recommendedSpecialty} specialist. Taking you to our booking page now.`,\r\n        sender: 'bot',\r\n        timestamp: new Date()\r\n      };\r\n      \r\n      setMessages(prev => [...prev, botConfirmation]);\r\n      \r\n      // After a short delay, navigate to the booking page\r\n      setTimeout(() => {\r\n        navigate('/book-appointment', { \r\n          state: { recommendedSpecialty: recommendedSpecialty } \r\n        });\r\n      }, 1500);\r\n    }, 1000);\r\n  };\r\n\r\n  // Scroll to bottom of messages\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [messages]);\r\n\r\n  // Reset unread count when chat is opened\r\n  useEffect(() => {\r\n    if (isChatOpen) {\r\n      setUnreadCount(0);\r\n    }\r\n  }, [isChatOpen]);\r\n\r\n  // Format timestamp\r\n  const formatTime = (date) => {\r\n    return new Date(date).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n  };\r\n\r\n  return (\r\n    <div className=\"doctor-chatbot\">\r\n      {/* Chat toggle button */}\r\n      <button \r\n        className=\"chat-toggle\"\r\n        onClick={() => setIsChatOpen(!isChatOpen)}\r\n      >\r\n        {isChatOpen ? (\r\n          <span className=\"close-icon\">×</span>\r\n        ) : (\r\n          <>\r\n            <span className=\"chat-icon\">👨‍⚕️</span>\r\n            <span>Dr. AI</span>\r\n            {unreadCount > 0 && (\r\n              <span className=\"unread-badge\">{unreadCount}</span>\r\n            )}\r\n          </>\r\n        )}\r\n      </button>\r\n      \r\n      {/* Chat window */}\r\n      {isChatOpen && (\r\n        <div className=\"chat-window\">\r\n          <div className=\"chat-header\">\r\n            <div className=\"chat-title\">\r\n              <span className=\"doctor-avatar\">👨‍⚕️</span>\r\n              <span className=\"doctor-name\">Dr. AI</span>\r\n              <span className=\"status-indicator\">●</span>\r\n            </div>\r\n            <p className=\"chat-subtitle\">AI-Powered Healthcare Assistant</p>\r\n          </div>\r\n          \r\n          <div className=\"messages-container\">\r\n            {messages.map(message => (\r\n              <div \r\n                key={message.id} \r\n                className={`message ${message.sender} ${message.urgencyLevel === 'urgent' ? 'urgent' : ''} ${message.isError ? 'error' : ''}`}\r\n              >\r\n                <div className=\"message-content\">\r\n                  <p>{message.text}</p>\r\n                  <span className=\"message-time\">\r\n                    {formatTime(message.timestamp)}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            ))}\r\n            \r\n            {isTyping && (\r\n              <div className=\"message bot\">\r\n                <div className=\"message-content typing\">\r\n                  <span className=\"typing-indicator\">\r\n                    <span></span>\r\n                    <span></span>\r\n                    <span></span>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            {showBookingButton && !isTyping && (\r\n              <div className=\"booking-button-container\">\r\n                <button \r\n                  className=\"booking-button\"\r\n                  onClick={handleBookAppointment}\r\n                >\r\n                  Book Appointment Now\r\n                </button>\r\n              </div>\r\n            )}\r\n            \r\n            <div ref={messagesEndRef} />\r\n          </div>\r\n          \r\n          <form className=\"chat-input\" onSubmit={handleSendMessage}>\r\n            <input\r\n              type=\"text\"\r\n              value={input}\r\n              onChange={(e) => setInput(e.target.value)}\r\n              placeholder=\"Type your health question here...\"\r\n              disabled={isTyping}\r\n            />\r\n            <button \r\n              type=\"submit\" \r\n              disabled={input.trim() === '' || isTyping}\r\n            >\r\n              <span className=\"send-icon\">➤</span>\r\n            </button>\r\n          </form>\r\n          \r\n          <div className=\"chat-disclaimer\">\r\n            <p>This is an AI assistant and not a replacement for professional medical advice. In case of emergency, call 911 or your local emergency number.</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DoctorChatbot; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAC1D,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,OAAO,QAAQ,wBAAwB;AAChD,OAAO,6BAA6B;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAErC,MAAMC,aAAa,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC1B,MAAMC,QAAQ,GAAGR,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAES,SAAS;IAAEC;EAAY,CAAC,GAAGT,OAAO,CAAC,CAAC;EAC5C,MAAM,CAACU,QAAQ,EAAEC,WAAW,CAAC,GAAGf,QAAQ,CAAC,CACvC;IACEgB,EAAE,EAAE,CAAC;IACLC,IAAI,EAAE,iFAAiF;IACvFC,MAAM,EAAE,KAAK;IACbC,SAAS,EAAE,IAAIC,IAAI,CAAC;EACtB,CAAC,CACF,CAAC;EACF,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGtB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACuB,QAAQ,EAAEC,WAAW,CAAC,GAAGxB,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACyB,UAAU,EAAEC,aAAa,CAAC,GAAG1B,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAAC2B,WAAW,EAAEC,cAAc,CAAC,GAAG5B,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM,CAAC6B,iBAAiB,EAAEC,oBAAoB,CAAC,GAAG9B,QAAQ,CAAC,KAAK,CAAC;EACjE,MAAM,CAAC+B,oBAAoB,EAAEC,uBAAuB,CAAC,GAAGhC,QAAQ,CAAC,EAAE,CAAC;EACpE,MAAMiC,cAAc,GAAGhC,MAAM,CAAC,IAAI,CAAC;EACnC,MAAM,CAACiC,mBAAmB,EAAEC,sBAAsB,CAAC,GAAGnC,QAAQ,CAAC,EAAE,CAAC;;EAElE;EACA,MAAMoC,gBAAgB,GAAG,CACvB;IACEC,QAAQ,EAAE,CAAC,UAAU,EAAE,WAAW,EAAE,UAAU,CAAC;IAC/CC,QAAQ,EAAE;EACZ,CAAC,EACD;IACED,QAAQ,EAAE,CAAC,OAAO,EAAE,aAAa,EAAE,KAAK,EAAE,QAAQ,CAAC;IACnDC,QAAQ,EAAE;EACZ,CAAC,EACD;IACED,QAAQ,EAAE,CAAC,OAAO,EAAE,UAAU,EAAE,kBAAkB,CAAC;IACnDC,QAAQ,EAAE;EACZ,CAAC,EACD;IACED,QAAQ,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,aAAa,EAAE,YAAY,EAAE,aAAa,CAAC;IACrEC,QAAQ,EAAE;EACZ,CAAC,EACD;IACED,QAAQ,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,UAAU,CAAC;IAC1EC,QAAQ,EAAE;EACZ,CAAC,EACD;IACED,QAAQ,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;IACrDC,QAAQ,EAAE;EACZ,CAAC,EACD;IACED,QAAQ,EAAE,CAAC,aAAa,EAAE,MAAM,EAAE,UAAU,EAAE,QAAQ,EAAE,OAAO,CAAC;IAChEC,QAAQ,EAAE;EACZ,CAAC,EACD;IACED,QAAQ,EAAE,CAAC,OAAO,EAAE,QAAQ,EAAE,YAAY,EAAE,SAAS,CAAC;IACtDC,QAAQ,EAAE;EACZ,CAAC,CACF;;EAED;EACA,MAAMC,wBAAwB,GAAG;IAC/BC,QAAQ,EAAE,CAAC,WAAW,EAAE,mBAAmB,CAAC;IAC5CC,QAAQ,EAAE,CAAC,WAAW,CAAC;IACvBC,KAAK,EAAE,CAAC,mBAAmB,EAAE,oBAAoB,CAAC;IAClDC,KAAK,EAAE,CAAC,aAAa,EAAE,mBAAmB,CAAC;IAC3C,YAAY,EAAE,CAAC,YAAY,EAAE,oBAAoB,CAAC;IAClD,qBAAqB,EAAE,CAAC,aAAa,EAAE,YAAY,CAAC;IACpDC,IAAI,EAAE,CAAC,aAAa,EAAE,wBAAwB,CAAC;IAC/C,cAAc,EAAE,CAAC,kBAAkB,EAAE,mBAAmB,CAAC;IACzDC,MAAM,EAAE,CAAC,kBAAkB,EAAE,mBAAmB,CAAC;IACjDC,QAAQ,EAAE,CAAC,kBAAkB,EAAE,oBAAoB,CAAC;IACpDC,QAAQ,EAAE,CAAC,kBAAkB,CAAC;IAC9B,YAAY,EAAE,CAAC,cAAc,EAAE,aAAa,CAAC;IAC7C,WAAW,EAAE,CAAC,aAAa,EAAE,WAAW,EAAE,kBAAkB,CAAC;IAC7D,UAAU,EAAE,CAAC,eAAe,CAAC;IAC7B,iBAAiB,EAAE,CAAC,eAAe,EAAE,WAAW,CAAC;IACjD,UAAU,EAAE,CAAC,sBAAsB,CAAC;IACpC,cAAc,EAAE,CAAC,sBAAsB,EAAE,WAAW,CAAC;IACrD,aAAa,EAAE,CAAC,sBAAsB,EAAE,mBAAmB,CAAC;IAC5D,kBAAkB,EAAE,CAAC,SAAS,EAAE,YAAY,CAAC;IAC7CC,UAAU,EAAE,CAAC,YAAY,EAAE,YAAY,CAAC;IACxCC,OAAO,EAAE,CAAC,YAAY,EAAE,YAAY,CAAC;IACrC,gBAAgB,EAAE,CAAC,gBAAgB,EAAE,YAAY,CAAC;IAClD,qBAAqB,EAAE,CAAC,YAAY,EAAE,mBAAmB,CAAC;IAC1DC,QAAQ,EAAE,CAAC,eAAe,EAAE,mBAAmB,CAAC;IAChD,WAAW,EAAE,CAAC,2BAA2B;EAC3C,CAAC;;EAED;EACA,MAAMC,iBAAiB,GAAG;IACxBX,QAAQ,EAAE,CACR,0CAA0C,EAC1C,sEAAsE,EACtE,wDAAwD,CACzD;IACDE,KAAK,EAAE,CACL,+BAA+B,EAC/B,sCAAsC,EACtC,gDAAgD,CACjD;IACDC,KAAK,EAAE,CACL,4BAA4B,EAC5B,gDAAgD,EAChD,+CAA+C,CAChD;IACD,YAAY,EAAE,CACZ,iCAAiC,EACjC,kDAAkD,EAClD,qEAAqE;EAEzE,CAAC;;EAED;EACA,MAAMS,iBAAiB,GAAG,MAAOC,CAAC,IAAK;IACrCA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,IAAIjC,KAAK,CAACkC,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;IAEzB,MAAMC,cAAc,GAAG;MACrBxC,EAAE,EAAEF,QAAQ,CAAC2C,MAAM,GAAG,CAAC;MACvBxC,IAAI,EAAEI,KAAK,CAACkC,IAAI,CAAC,CAAC;MAClBrC,MAAM,EAAE,MAAM;MACdC,SAAS,EAAE,IAAIC,IAAI,CAAC;IACtB,CAAC;IAEDL,WAAW,CAAC2C,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEF,cAAc,CAAC,CAAC;IAC9ClC,QAAQ,CAAC,EAAE,CAAC;IACZE,WAAW,CAAC,IAAI,CAAC;;IAEjB;IACA,MAAMmC,cAAc,GAAG,CACrB,GAAGzB,mBAAmB,EACtB;MAAE0B,IAAI,EAAE,MAAM;MAAEC,OAAO,EAAExC,KAAK,CAACkC,IAAI,CAAC;IAAE,CAAC,CACxC;IACDpB,sBAAsB,CAACwB,cAAc,CAAC;IAEtC,IAAI;MACF;MACA,MAAMrB,QAAQ,GAAG,MAAM1B,SAAS,CAAC,sBAAsB,EAAE;QACvDkD,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACnBC,OAAO,EAAE9C,KAAK,CAACkC,IAAI,CAAC,CAAC;UACrBrB,mBAAmB,EAAEyB,cAAc,CAACS,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;QACjD,CAAC;MACH,CAAC,CAAC;MAEF,IAAI,CAAC9B,QAAQ,CAAC+B,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,qCAAqC,CAAC;MACxD;MAEA,MAAMC,IAAI,GAAG,MAAMjC,QAAQ,CAACkC,IAAI,CAAC,CAAC;;MAElC;MACArC,sBAAsB,CAACuB,IAAI,IAAI,CAC7B,GAAGA,IAAI,EACP;QAAEE,IAAI,EAAE,WAAW;QAAEC,OAAO,EAAEU,IAAI,CAACA,IAAI,CAACjC;MAAS,CAAC,CACnD,CAAC;MAEF,MAAMmC,aAAa,GAAG;QACpBzD,EAAE,EAAEF,QAAQ,CAAC2C,MAAM,GAAG,CAAC;QACvBxC,IAAI,EAAEsD,IAAI,CAACA,IAAI,CAACjC,QAAQ;QACxBpB,MAAM,EAAE,KAAK;QACbC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC;QACrBsD,YAAY,EAAEH,IAAI,CAACA,IAAI,CAACG,YAAY;QACpCC,wBAAwB,EAAEJ,IAAI,CAACA,IAAI,CAACI;MACtC,CAAC;MAED5D,WAAW,CAAC2C,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEe,aAAa,CAAC,CAAC;;MAE7C;MACA,IAAIF,IAAI,CAACA,IAAI,CAACI,wBAAwB,EAAE;QACtC3C,uBAAuB,CAACuC,IAAI,CAACA,IAAI,CAACI,wBAAwB,CAAC;QAC3D7C,oBAAoB,CAAC,IAAI,CAAC;MAC5B;;MAEA;MACA,IAAIyC,IAAI,CAACA,IAAI,CAACG,YAAY,KAAK,QAAQ,EAAE;QACvCE,UAAU,CAAC,MAAM;UACf,MAAMC,iBAAiB,GAAG;YACxB7D,EAAE,EAAEF,QAAQ,CAAC2C,MAAM,GAAG,CAAC;YACvBxC,IAAI,EAAE,4HAA4H;YAClIC,MAAM,EAAE,KAAK;YACbC,SAAS,EAAE,IAAIC,IAAI,CAACA,IAAI,CAAC0D,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;YACtCJ,YAAY,EAAE;UAChB,CAAC;UACD3D,WAAW,CAAC2C,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEmB,iBAAiB,CAAC,CAAC;QACnD,CAAC,EAAE,IAAI,CAAC;MACV;MAEA,IAAI,CAACpD,UAAU,EAAE;QACfG,cAAc,CAAC8B,IAAI,IAAIA,IAAI,GAAG,CAAC,CAAC;MAClC;IACF,CAAC,CAAC,OAAOqB,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC;;MAEzD;MACA,MAAME,YAAY,GAAG;QACnBjE,EAAE,EAAEF,QAAQ,CAAC2C,MAAM,GAAG,CAAC;QACvBxC,IAAI,EAAE,wHAAwH;QAC9HC,MAAM,EAAE,KAAK;QACbC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC;QACrB8D,OAAO,EAAE;MACX,CAAC;MAEDnE,WAAW,CAAC2C,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEuB,YAAY,CAAC,CAAC;IAC9C,CAAC,SAAS;MACRzD,WAAW,CAAC,KAAK,CAAC;IACpB;EACF,CAAC;;EAED;EACA,MAAM2D,qBAAqB,GAAGA,CAAA,KAAM;IAClCrD,oBAAoB,CAAC,KAAK,CAAC;IAE3B,MAAMsD,mBAAmB,GAAG;MAC1BpE,EAAE,EAAEF,QAAQ,CAAC2C,MAAM,GAAG,CAAC;MACvBxC,IAAI,EAAE,sEAAsE;MAC5EC,MAAM,EAAE,KAAK;MACbC,SAAS,EAAE,IAAIC,IAAI,CAAC;IACtB,CAAC;IAEDL,WAAW,CAAC2C,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE0B,mBAAmB,CAAC,CAAC;IAEnDR,UAAU,CAAC,MAAM;MACf,MAAMS,eAAe,GAAG;QACtBrE,EAAE,EAAEF,QAAQ,CAAC2C,MAAM,GAAG,CAAC;QACvBxC,IAAI,EAAE,mDAAmDc,oBAAoB,kDAAkD;QAC/Hb,MAAM,EAAE,KAAK;QACbC,SAAS,EAAE,IAAIC,IAAI,CAAC;MACtB,CAAC;MAEDL,WAAW,CAAC2C,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE2B,eAAe,CAAC,CAAC;;MAE/C;MACAT,UAAU,CAAC,MAAM;QACfjE,QAAQ,CAAC,mBAAmB,EAAE;UAC5B2E,KAAK,EAAE;YAAEvD,oBAAoB,EAAEA;UAAqB;QACtD,CAAC,CAAC;MACJ,CAAC,EAAE,IAAI,CAAC;IACV,CAAC,EAAE,IAAI,CAAC;EACV,CAAC;;EAED;EACA7B,SAAS,CAAC,MAAM;IAAA,IAAAqF,qBAAA;IACd,CAAAA,qBAAA,GAAAtD,cAAc,CAACuD,OAAO,cAAAD,qBAAA,uBAAtBA,qBAAA,CAAwBE,cAAc,CAAC;MAAEC,QAAQ,EAAE;IAAS,CAAC,CAAC;EAChE,CAAC,EAAE,CAAC5E,QAAQ,CAAC,CAAC;;EAEd;EACAZ,SAAS,CAAC,MAAM;IACd,IAAIuB,UAAU,EAAE;MACdG,cAAc,CAAC,CAAC,CAAC;IACnB;EACF,CAAC,EAAE,CAACH,UAAU,CAAC,CAAC;;EAEhB;EACA,MAAMkE,UAAU,GAAIC,IAAI,IAAK;IAC3B,OAAO,IAAIxE,IAAI,CAACwE,IAAI,CAAC,CAACC,kBAAkB,CAAC,EAAE,EAAE;MAAEC,IAAI,EAAE,SAAS;MAAEC,MAAM,EAAE;IAAU,CAAC,CAAC;EACtF,CAAC;EAED,oBACEzF,OAAA;IAAK0F,SAAS,EAAC,gBAAgB;IAAAC,QAAA,gBAE7B3F,OAAA;MACE0F,SAAS,EAAC,aAAa;MACvBE,OAAO,EAAEA,CAAA,KAAMxE,aAAa,CAAC,CAACD,UAAU,CAAE;MAAAwE,QAAA,EAEzCxE,UAAU,gBACTnB,OAAA;QAAM0F,SAAS,EAAC,YAAY;QAAAC,QAAA,EAAC;MAAC;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,gBAErChG,OAAA,CAAAE,SAAA;QAAAyF,QAAA,gBACE3F,OAAA;UAAM0F,SAAS,EAAC,WAAW;UAAAC,QAAA,EAAC;QAAK;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACxChG,OAAA;UAAA2F,QAAA,EAAM;QAAM;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,EAClB3E,WAAW,GAAG,CAAC,iBACdrB,OAAA;UAAM0F,SAAS,EAAC,cAAc;UAAAC,QAAA,EAAEtE;QAAW;UAAAwE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CACnD;MAAA,eACD;IACH;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACK,CAAC,EAGR7E,UAAU,iBACTnB,OAAA;MAAK0F,SAAS,EAAC,aAAa;MAAAC,QAAA,gBAC1B3F,OAAA;QAAK0F,SAAS,EAAC,aAAa;QAAAC,QAAA,gBAC1B3F,OAAA;UAAK0F,SAAS,EAAC,YAAY;UAAAC,QAAA,gBACzB3F,OAAA;YAAM0F,SAAS,EAAC,eAAe;YAAAC,QAAA,EAAC;UAAK;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC5ChG,OAAA;YAAM0F,SAAS,EAAC,aAAa;YAAAC,QAAA,EAAC;UAAM;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC3ChG,OAAA;YAAM0F,SAAS,EAAC,kBAAkB;YAAAC,QAAA,EAAC;UAAC;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxC,CAAC,eACNhG,OAAA;UAAG0F,SAAS,EAAC,eAAe;UAAAC,QAAA,EAAC;QAA+B;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7D,CAAC,eAENhG,OAAA;QAAK0F,SAAS,EAAC,oBAAoB;QAAAC,QAAA,GAChCnF,QAAQ,CAACyF,GAAG,CAACpC,OAAO,iBACnB7D,OAAA;UAEE0F,SAAS,EAAE,WAAW7B,OAAO,CAACjD,MAAM,IAAIiD,OAAO,CAACO,YAAY,KAAK,QAAQ,GAAG,QAAQ,GAAG,EAAE,IAAIP,OAAO,CAACe,OAAO,GAAG,OAAO,GAAG,EAAE,EAAG;UAAAe,QAAA,eAE9H3F,OAAA;YAAK0F,SAAS,EAAC,iBAAiB;YAAAC,QAAA,gBAC9B3F,OAAA;cAAA2F,QAAA,EAAI9B,OAAO,CAAClD;YAAI;cAAAkF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACrBhG,OAAA;cAAM0F,SAAS,EAAC,cAAc;cAAAC,QAAA,EAC3BN,UAAU,CAACxB,OAAO,CAAChD,SAAS;YAAC;cAAAgF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC1B,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ;QAAC,GARDnC,OAAO,CAACnD,EAAE;UAAAmF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OASZ,CACN,CAAC,EAED/E,QAAQ,iBACPjB,OAAA;UAAK0F,SAAS,EAAC,aAAa;UAAAC,QAAA,eAC1B3F,OAAA;YAAK0F,SAAS,EAAC,wBAAwB;YAAAC,QAAA,eACrC3F,OAAA;cAAM0F,SAAS,EAAC,kBAAkB;cAAAC,QAAA,gBAChC3F,OAAA;gBAAA6F,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAY,CAAC,eACbhG,OAAA;gBAAA6F,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAY,CAAC,eACbhG,OAAA;gBAAA6F,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAY,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACT;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CACN,EAEAzE,iBAAiB,IAAI,CAACN,QAAQ,iBAC7BjB,OAAA;UAAK0F,SAAS,EAAC,0BAA0B;UAAAC,QAAA,eACvC3F,OAAA;YACE0F,SAAS,EAAC,gBAAgB;YAC1BE,OAAO,EAAEf,qBAAsB;YAAAc,QAAA,EAChC;UAED;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CACN,eAEDhG,OAAA;UAAKkG,GAAG,EAAEvE;QAAe;UAAAkE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzB,CAAC,eAENhG,OAAA;QAAM0F,SAAS,EAAC,YAAY;QAACS,QAAQ,EAAErD,iBAAkB;QAAA6C,QAAA,gBACvD3F,OAAA;UACEoG,IAAI,EAAC,MAAM;UACXC,KAAK,EAAEtF,KAAM;UACbuF,QAAQ,EAAGvD,CAAC,IAAK/B,QAAQ,CAAC+B,CAAC,CAACwD,MAAM,CAACF,KAAK,CAAE;UAC1CG,WAAW,EAAC,mCAAmC;UAC/CC,QAAQ,EAAExF;QAAS;UAAA4E,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACpB,CAAC,eACFhG,OAAA;UACEoG,IAAI,EAAC,QAAQ;UACbK,QAAQ,EAAE1F,KAAK,CAACkC,IAAI,CAAC,CAAC,KAAK,EAAE,IAAIhC,QAAS;UAAA0E,QAAA,eAE1C3F,OAAA;YAAM0F,SAAS,EAAC,WAAW;YAAAC,QAAA,EAAC;UAAC;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9B,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC,eAEPhG,OAAA;QAAK0F,SAAS,EAAC,iBAAiB;QAAAC,QAAA,eAC9B3F,OAAA;UAAA2F,QAAA,EAAG;QAA6I;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjJ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAAC5F,EAAA,CAlWID,aAAa;EAAA,QACAN,WAAW,EACOC,OAAO;AAAA;AAAA4G,EAAA,GAFtCvG,aAAa;AAoWnB,eAAeA,aAAa;AAAC,IAAAuG,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}